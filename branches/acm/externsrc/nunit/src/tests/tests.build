<?xml version="1.0"?>
<project name="NUnit.Tests" default="build">

  <property name="project.src.dir" value=".."
      unless="${property::exists('project.src.dir')}"/>

  <include buildfile="../nunit.build.include"/>

  <target name="clean">
    <nant target="clean"
      buildfile="mock-assembly/mock-assembly.build"/>
    <nant target="clean"
      buildfile="nonamespace-assembly/nonamespace-assembly.build"/>
    <nant target="clean"
      buildfile="notestfixtures-assembly/notestfixtures-assembly.build"/>
    <nant target="clean"
      buildfile="test-utilities/test-utilities.build"/>
    <nant target="clean"
      buildfile="timing-tests/timing-tests.build"/>
  </target>

  <target name="build">
    <!-- Build test assemblies used as data by the tests -->
    <nant target="build"
      buildfile="mock-assembly/mock-assembly.build"/>
    <nant target="build"
      buildfile="nonamespace-assembly/nonamespace-assembly.build"/>
    <nant target="build"
      buildfile="notestfixtures-assembly/notestfixtures-assembly.build"/>

    <!-- Build test-utilities -->
    <nant target="build"
      buildfile="test-utilities/test-utilities.build"/>

    <!-- Build timing-tests.dll -->
    <nant target="build" if="${build.win32}"
      buildfile="timing-tests/timing-tests.build"/>
  </target>

  <target name="package">
    <nant target="package"
      buildfile="mock-assembly/mock-assembly.build"/>
    <nant target="package"
      buildfile="nonamespace-assembly/nonamespace-assembly.build"/>
    <nant target="package"
      buildfile="notestfixtures-assembly/notestfixtures-assembly.build"/>
    <nant target="package"
      buildfile="test-utilities/test-utilities.build"/>
    <nant target="package"
      buildfile="timing-tests/timing-tests.build"/>
    <copy todir="${package.src.dir}/tests"
      file="tests.build"/>
  </target>
</project>
